# -*- coding: utf-8 -*-
"""
Created on Thu Apr 07 15:40:19 2016

@author: tsz
"""

from __future__ import division

import numpy as np
import scipy.interpolate as sint

def get_characs(t_amb, t_flow,hp_type):
    if hp_type==1: #Vitocal 200-A
        cop= {(-15,35):2.2393,(-15,45):1.7765,(-15,55):1.6243,(-15,60):1.5391,(-7,35):2.8264,(-7,45):2.3484,(-7,55):1.8871,(-7,60):1.7729,(2,35):3.7727,(2,45):3,(2,55):2.3264,(2,60):2.2069,(7,35):4.7778,(7,45):3.5714,(7,55):2.7561,(7,60):2.4569,(10,35):5.1461,(10,45):3.773,(10,55):2.9423,(10,60):2.6218,(20,35):6.4653,(20,45):4.527,(20,55):3.7519,(20,60):3.1934,(30,35):7.8542,(30,45):5.403,(30,55):4.9902,(30,60):3.8462,(32,35):13.0903,(32,45):6.2342,(32,55):5.4241,(32,60):4.1209}   
        p_el= {(-15,35):2.34,(-15,45):2.55,(-15,55):1.73,(-15,60):1.73,(-7,35):2.65,(-7,45):3.1,(-7,55):1.86,(-7,60):1.86,(2,35):1.32,(2,45):1.58,(2,55):1.93,(2,60):2.03,(7,35):1.08,(7,45):1.4,(7,55):1.64,(7,60):1.97,(10,35):1.068,(10,45):1.63,(10,55):1.56,(10,60):1.93,(20,35):1.01,(20,45):1.48,(20,55):1.29,(20,60):1.81,(30,35):0.96,(30,45):1.34,(30,55):1.02,(30,60):1.69,(32,35):0.96,(32,45):1.34,(32,55):1.02,(32,60):1.69}   
        q_heat= {(-15,35):5.24,(-15,45):4.53,(-15,55):2.81,(-15,60):2.6626,(-7,35):7.49,(-7,45):7.28,(-7,55):3.51,(-7,60):3.2976,(2,35):4.98,(2,45):4.74,(2,55):4.49,(2,60):4.48,(7,35):5.16,(7,45):5,(7,55):4.52,(7,60):4.84,(10,35):5.496,(10,45):6.15,(10,55):4.59,(10,60):5.06,(20,35):6.53,(20,45):6.7,(20,55):4.84,(20,60):5.78,(30,35):7.54,(30,45):7.24,(30,55):5.09,(30,60):6.5,(32,35):12.5667,(32,45):8.3538,(32,55):5.5326,(32,60):6.9643}    
    
    if hp_type==2: #Vitocal 350-A
        cop= {(-20,35):2.25,(-20,45):2,(-20,55):1.7878,(-20,60):1.5575,(-20,65):1.5251,(-15,35):2.4815,(-15,45):2.135,(-15,55):1.8875,(-15,60):1.6613,(-15,65):1.6204,(-10,35):2.7,(-10,45):2.4286,(-10,55):2.1195,(-10,60):1.78,(-10,65):1.6863,(-7,35):3,(-7,45):2.5017,(-7,55):2.1642,(-7,60):1.8597,(-7,65):1.8005,(2,35):3.6552,(2,45):2.973,(2,55):2.4878,(2,60):2.1731,(2,65):2.0577,(7,35):4.0968,(7,45):3.3846,(7,55):3,(7,60):2.5849,(7,65):2.4528,(35,35):5.8788,(35,45):4.875,(35,55):3.9038,(35,60):3.4182,(35,65):2.8912}   
        p_el= {(-20,35):2.8,(-20,45):3.3,(-20,55):3.3,(-20,60):5,(-20,65):5.2,(-15,35):2.7,(-15,45):2.7,(-15,55):2.7,(-15,60):5,(-15,65):5.2,(-10,35):3,(-10,45):3.5,(-10,55):3.5,(-10,60):5,(-10,65):5,(-7,35):2.9,(-7,45):2.9,(-7,55):2.9,(-7,60):5,(-7,65):5.2,(2,35):2.9,(2,45):3.7,(2,55):3.7,(2,60):5.2,(2,65):5.2,(7,35):3.1,(7,45):3.9,(7,55):3.5,(7,60):5.3,(7,65):5.3,(35,35):3.3,(35,45):4,(35,55):4,(35,60):5.5,(35,65):5.5}   
        q_heat= {(-20,35):6.3,(-20,45):6.6,(-20,55):5.8998,(-20,60):7.7875,(-20,65):7.9306,(-15,35):6.7,(-15,45):5.7645,(-15,55):5.0963,(-15,60):8.3067,(-15,65):8.4262,(-10,35):8.1,(-10,45):8.5,(-10,55):7.4184,(-10,60):8.9,(-10,65):8.4313,(-7,35):8.7,(-7,45):7.255,(-7,55):6.2761,(-7,60):9.2985,(-7,65):9.3625,(2,35):10.6,(2,45):11,(2,55):9.205,(2,60):11.3,(2,65):10.7,(7,35):12.7,(7,45):13.2,(7,55):10.5,(7,60):13.7,(7,65):13,(35,35):19.4,(35,45):19.5,(35,55):15.6152,(35,60):18.8,(35,65):15.9018}
    
    xp = np.sort(cop.keys())
    y_cop = [cop[xp[k,0],xp[k,1]] for k in range(0,np.size(xp,0))]
    y_pel = [p_el[xp[k,0],xp[k,1]] for k in range(0,np.size(xp,0))]
    y_qheat = [q_heat[xp[k,0],xp[k,1]] for k in range(0,np.size(xp,0))]
    
    res_cop=sint.griddata((xp[:,0], xp[:,1]), y_cop, (t_amb, t_flow), method='cubic')
    res_p_el=sint.griddata((xp[:,0], xp[:,1]), y_pel, (t_amb, t_flow), method='cubic')
    res_q_heat=sint.griddata((xp[:,0], xp[:,1]), y_qheat, (t_amb, t_flow), method='cubic')
   
    
    return (res_cop, res_p_el, res_q_heat)

if __name__ == "__main__":
    t_amb = np.loadtxt("t_amb.txt")
    t_flow=55*np.ones(np.size(t_amb))
    (cop, p_el, q_heat) =  get_characs(t_amb,t_flow,1)
    print(cop)